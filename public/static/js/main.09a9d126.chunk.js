(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{235:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(52),a=n.n(i),s=n(11),o=n(8),u=n(104),l=n(7),d=n(21),j=n(22),h=n(24),b=n(23),p=n(9),O=n(17),f=n.n(O),m=n(31),v=n(105),g=n.n(v).a.create({baseURL:"http://localhost:3200/api"}),x=n(13),y=Object(x.a)(),I="SIGN_IN",A="SIGN_OUT",S="CREATE_ARTICLE",w="FETCH_ARTICLES",C="FETCH_ARTICLE",N="DELETE_ARTICLE",k="EDIT_ARTICLE",E=n(237),T=n(236),_=n(2),L=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).renderInput=function(t){var n=t.input,r=t.label,c=t.meta,i="field ".concat(c.error&&c.touched?"error":"");return Object(_.jsxs)("div",{className:i,children:[Object(_.jsx)("label",{children:r}),Object(_.jsx)("input",Object(p.a)(Object(p.a)({},n),{},{autoComplete:"off"})),e.renderError(c)]})},e.onSubmit=function(t){e.props.onSubmit(t)},e}return Object(j.a)(n,[{key:"renderError",value:function(e){var t=e.error;if(e.touched&&t)return Object(_.jsx)("div",{className:"ui error message",children:Object(_.jsx)("div",{className:"header",children:t})})}},{key:"render",value:function(){return Object(_.jsxs)("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:"ui form error",children:[Object(_.jsx)(E.a,{name:"title",component:this.renderInput,label:"Enter Title"}),Object(_.jsx)(E.a,{name:"description",component:this.renderInput,label:"Enter Description"}),Object(_.jsx)("button",{className:"ui button primary",children:"Submit"})]})}}]),n}(c.a.Component),D=Object(T.a)({form:"articleForm",validate:function(e){var t={};return e.title||(t.title="You must enter a title"),e.description||(t.description="You must enter a description"),t}})(L),R=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).onSubmit=function(t){e.props.createArticle(t)},e}return Object(j.a)(n,[{key:"render",value:function(){return Object(_.jsxs)("div",{children:[Object(_.jsx)("h3",{children:"Create a Article"}),Object(_.jsx)(D,{onSubmit:this.onSubmit})]})}}]),n}(c.a.Component),U=Object(s.b)(null,{createArticle:function(e){return function(){var t=Object(m.a)(f.a.mark((function t(n,r){var c,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r().auth.userId,t.next=3,g.post("/articles",Object(p.a)(Object(p.a)({},e),{},{userId:c}));case 3:i=t.sent,n({type:S,payload:i.data}),y.push("/");case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(R),F=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).onSubmit=function(t){e.props.editArticle(t)},e}return Object(j.a)(n,[{key:"render",value:function(){return Object(_.jsxs)("div",{children:["ArticleEdit",Object(_.jsx)(D,{onSubmit:this.onSubmit})]})}}]),n}(c.a.Component),G=Object(s.b)(null,{editArticle:function(e,t){return function(){var n=Object(m.a)(f.a.mark((function n(r){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.patch("/articles/".concat(e),t);case 2:c=n.sent,r({type:k,payload:c.data});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})(F),M=function(){return Object(_.jsx)("div",{children:"ArticleDelete"})},q=n(30),B=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchArticles()}},{key:"renderAdmin",value:function(e){if(e.userId===this.props.currentUserId)return Object(_.jsxs)("div",{className:"right floated content",children:[Object(_.jsx)(q.a,{to:"/Articles/edit/".concat(e.id),className:"ui button primary",children:"Edit"}),Object(_.jsx)("button",{className:"ui button negative",children:"Delete"})]})}},{key:"renderList",value:function(){var e=this;return this.props.Articles.length>0?this.props.Articles[0].map((function(t){return Object(_.jsxs)("div",{className:"item",children:[e.renderAdmin(t),Object(_.jsx)("i",{className:"large middle aligned icon camera"}),Object(_.jsxs)("div",{className:"content",children:[t.title,Object(_.jsx)("div",{className:"description",children:t.description})]})]},t.id)})):null}},{key:"renderCreate",value:function(){if(this.props.isSignedIn)return Object(_.jsx)("div",{style:{textAlign:"right"},children:Object(_.jsx)(q.a,{to:"/Articles/new",className:"ui button primary",children:"Create Article"})})}},{key:"render",value:function(){return Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{children:"Articles"}),Object(_.jsx)("div",{className:"ui celled list",children:this.renderList()}),this.renderCreate()]})}}]),n}(c.a.Component),H=Object(s.b)((function(e){return{Articles:Object.values(e.article),currentUserId:e.auth.userId,isSignedIn:e.auth.isSignedIn}}),{fetchArticles:function(){return function(){var e=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/articles");case 2:n=e.sent,t({type:w,payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(B),J=function(){return Object(_.jsx)("div",{children:"ArticleShow"})},X=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).onAuthChange=function(t){t?e.props.signIn(e.auth.currentUser.get().getId()):e.props.signOut()},e.onSignInClick=function(){e.auth.signIn()},e.onSignOutClick=function(){e.auth.signOut()},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"215410547619-m6ctdeoatr19eqckf2g2ov5h8give401.apps.googleusercontent.com",scope:"email"}).then((function(){e.auth=window.gapi.auth2.getAuthInstance(),e.onAuthChange(e.auth.isSignedIn.get()),e.auth.isSignedIn.listen(e.onAuthChange)}))}))}},{key:"renderAuthButton",value:function(){return null===this.props.isSignedIn?null:this.props.isSignedIn?Object(_.jsxs)("button",{onClick:this.onSignOutClick,className:"ui red google button",children:[Object(_.jsx)("i",{className:"google icon"}),"Sign Out"]}):Object(_.jsxs)("button",{onClick:this.onSignInClick,className:"ui red google button",children:[Object(_.jsx)("i",{className:"google icon"}),"Sign In with Google"]})}},{key:"render",value:function(){return Object(_.jsx)("div",{children:this.renderAuthButton()})}}]),n}(c.a.Component),Y=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return function(){var t=Object(m.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.post("/auth/signin",{userId:e});case 2:r=t.sent,n({type:I,payload:r.data.userId});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},signOut:function(){return{type:A}}})(X),K=function(){return Object(_.jsxs)("div",{className:"ui secondary pointing menu",children:[Object(_.jsx)(q.a,{to:"/",className:"item",children:"Article"}),Object(_.jsxs)("div",{className:"right menu",children:[Object(_.jsx)(q.a,{to:"/",className:"item",children:"All Articles"}),Object(_.jsx)(Y,{})]})]})},P=function(){return Object(_.jsx)("div",{className:"ui container",children:Object(_.jsx)(l.b,{history:y,children:Object(_.jsxs)("div",{children:[Object(_.jsx)(K,{}),Object(_.jsx)(l.a,{path:"/",exact:!0,component:H}),Object(_.jsx)(l.a,{path:"/articles/new",exact:!0,component:U}),Object(_.jsx)(l.a,{path:"/articles/edit/:id",exact:!0,component:G}),Object(_.jsx)(l.a,{path:"/articles/delete",exact:!0,component:M}),Object(_.jsx)(l.a,{path:"/articles/show",exact:!0,component:J})]})})})},V=n(238),z=n(36),Q=n(75),W=n.n(Q),Z={isSignedIn:null,isSignedUp:null,userId:null},$=Object(o.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(p.a)(Object(p.a)({},e),{},{isSignedIn:!0,userId:t.payload});case A:return Object(p.a)(Object(p.a)({},e),{},{isSignedIn:!1,userId:null});default:return e}},form:V.a,article:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(p.a)(Object(p.a)({},e),W.a.mapKeys(t.payload,"id"));case C:case S:case k:return Object(p.a)(Object(p.a)({},e),{},Object(z.a)({},t.payload.id,t.payload));case N:return W.a.omit(e,t.payload);default:return e}}}),ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,te=Object(o.e)($,ee(Object(o.a)(u.a)));a.a.render(Object(_.jsx)(s.a,{store:te,children:Object(_.jsx)(P,{})}),document.querySelector("#root"))}},[[235,1,2]]]);
//# sourceMappingURL=main.09a9d126.chunk.js.map